<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Helper Functions</title>

<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/datatables-binding/datatables.js"></script>
<script src="libs/datatables/jquery.dataTables.min.js"></script>
<link href="libs/datatables-default/dataTables.extra.css" rel="stylesheet" />
<link href="libs/datatables-default/jquery.dataTables.min.css" rel="stylesheet" />
<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 70px;
}
p code {
  white-space: inherit;
}
</style>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="./">DT</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="./">Home</a></li>
        <li><a href="options.html">Options</a></li>
        <li><a href="functions.html">Functions</a></li>
        <li><a href="server.html">Server-side Processing</a></li>
        <li><a href="extensions.html">Extensions</a></li>
        <li><a href="shiny.html">Shiny</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/rstudio/DT" title="View Source on Github"><i class="fa fa-github fa-lg"></i></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</nav><!--/.navbar -->

<div id="header">
<h1 class="title">Helper Functions</h1>
</div>


<p><strong>DT</strong> has provided a few helper functions to make it convenient to tweak the table without writing a lot of HTML or JavaScript code.</p>
<hr />
<div id="format-columns" class="section level1">
<h1><span class="header-section-number">1</span> Format Columns</h1>
<p>You can use the functions <code>format*()</code> to format the table columns as currency, percentages, or round numbers. Here are some examples:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(DT)
m =<span class="st"> </span><span class="kw">cbind</span>(<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">60</span>, <span class="fl">1e5</span>, <span class="fl">1e6</span>), <span class="dv">20</span>), <span class="kw">runif</span>(<span class="dv">20</span>), <span class="kw">rnorm</span>(<span class="dv">20</span>, <span class="dv">100</span>))
m[, <span class="dv">1</span>:<span class="dv">3</span>] =<span class="st"> </span><span class="kw">round</span>(m[, <span class="dv">1</span>:<span class="dv">3</span>])
m[, <span class="dv">4</span>:<span class="dv">5</span>] =<span class="st"> </span><span class="kw">round</span>(m[, <span class="dv">4</span>:<span class="dv">5</span>], <span class="dv">7</span>)
<span class="kw">colnames</span>(m) =<span class="st"> </span><span class="kw">head</span>(LETTERS, <span class="kw">ncol</span>(m))
<span class="kw">head</span>(m)</code></pre>
<pre><code>##            A        B        C         D         E
## [1,] -460476  -967824  -594707 0.6478935  99.50897
## [2,] -130177  -117975  -107917 0.3198206  97.69083
## [3,] 1658708  -926004 -1165396 0.3077200 101.00574
## [4,]  170508  -628891  2268956 0.2197676  99.29080
## [5,]  229288  -525039  1307962 0.3694889  99.31199
## [6,] 1815065 -1586693 -1023109 0.9842192 101.02557</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># format the columns A and C as currency, and D as percentages</span>
<span class="kw">datatable</span>(m) %&gt;%<span class="st"> </span><span class="kw">formatCurrency</span>(<span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;C&#39;</span>)) %&gt;%<span class="st"> </span><span class="kw">formatPercentage</span>(<span class="st">&#39;D&#39;</span>, <span class="dv">2</span>)</code></pre>
<p><div id="htmlwidget-8397" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-8397">{
  "x": {
    "data": [
      [-460476, -130177, 1658708, 170508, 229288, 1815065, 560916, -1165061, -586853, -345662, 1324082, 459814, 500771, 210683, -455841, 1886913, 597850, -1866617, 801356, -372791],
      [-967824, -117975, -926004, -628891, -525039, -1586693, 937787, 253373, -1038137, 1353815, 526464, -195071, 995126, 978133, 921581, 788640, 653918, 38088, -205963, -280471],
      [-594707, -107917, -1165396, 2268956, 1307962, -1023109, -302885, -366655, 879965, 16631, 353319, 71453, 57130, 1468602, -125771, 1616471, -1448753, 684614, 223854, 315942],
      [0.6478935, 0.3198206, 0.30772, 0.2197676, 0.3694889, 0.9842192, 0.1542023, 0.091044, 0.1419069, 0.6900071, 0.6192565, 0.8913941, 0.6729991, 0.7370777, 0.5211357, 0.6598384, 0.8218055, 0.7862816, 0.9798219, 0.4394315],
      [99.5089688, 97.6908311, 101.0057385, 99.2907992, 99.3119914, 101.0255714, 99.715227, 98.7792823, 100.1813035, 99.8611086, 100.0057642, 100.3852804, 99.62934, 100.6443765, 99.7795134, 100.331782, 101.096839, 100.4351815, 99.6740684, 101.1488076]
    ],
    "container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n      <th>E</th>\n    </tr>\n  </thead>\n</table>",
    "options": {
      "columnDefs": [
        {
          "className": "dt-right",
          "targets": [0, 1, 2, 3, 4]
        }
      ],
      "order": [],
      "autoWidth": false,
      "orderClasses": false,
      "rowCallback": "function(row, data) {\nvar d = parseFloat(data[3]); $('td:eq(3)', row).html(isNaN(d) ? '' : (d * 100).toFixed(2) + '%');\nvar d = parseFloat(data[0]); $('td:eq(0)', row).html(isNaN(d) ? '' : '$' + d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\nvar d = parseFloat(data[2]); $('td:eq(2)', row).html(isNaN(d) ? '' : '$' + d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\n}"
    },
    "callback": "function(table) {\nreturn table;\n}",
    "filter": "none"
  },
  "evals": ["options.rowCallback", "callback"]
}</script></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the first two columns are Euro currency, and round column E to 3 decimal places</span>
<span class="kw">datatable</span>(m) %&gt;%<span class="st"> </span><span class="kw">formatCurrency</span>(<span class="dv">1</span>:<span class="dv">2</span>, <span class="st">&#39;\U20AC&#39;</span>) %&gt;%<span class="st"> </span><span class="kw">formatRound</span>(<span class="st">&#39;E&#39;</span>, <span class="dv">3</span>)</code></pre>
<p><div id="htmlwidget-3125" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-3125">{
  "x": {
    "data": [
      [-460476, -130177, 1658708, 170508, 229288, 1815065, 560916, -1165061, -586853, -345662, 1324082, 459814, 500771, 210683, -455841, 1886913, 597850, -1866617, 801356, -372791],
      [-967824, -117975, -926004, -628891, -525039, -1586693, 937787, 253373, -1038137, 1353815, 526464, -195071, 995126, 978133, 921581, 788640, 653918, 38088, -205963, -280471],
      [-594707, -107917, -1165396, 2268956, 1307962, -1023109, -302885, -366655, 879965, 16631, 353319, 71453, 57130, 1468602, -125771, 1616471, -1448753, 684614, 223854, 315942],
      [0.6478935, 0.3198206, 0.30772, 0.2197676, 0.3694889, 0.9842192, 0.1542023, 0.091044, 0.1419069, 0.6900071, 0.6192565, 0.8913941, 0.6729991, 0.7370777, 0.5211357, 0.6598384, 0.8218055, 0.7862816, 0.9798219, 0.4394315],
      [99.5089688, 97.6908311, 101.0057385, 99.2907992, 99.3119914, 101.0255714, 99.715227, 98.7792823, 100.1813035, 99.8611086, 100.0057642, 100.3852804, 99.62934, 100.6443765, 99.7795134, 100.331782, 101.096839, 100.4351815, 99.6740684, 101.1488076]
    ],
    "container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n      <th>E</th>\n    </tr>\n  </thead>\n</table>",
    "options": {
      "columnDefs": [
        {
          "className": "dt-right",
          "targets": [0, 1, 2, 3, 4]
        }
      ],
      "order": [],
      "autoWidth": false,
      "orderClasses": false,
      "rowCallback": "function(row, data) {\nvar d = parseFloat(data[4]); $('td:eq(4)', row).html(isNaN(d) ? '' : d.toFixed(3));\nvar d = parseFloat(data[0]); $('td:eq(0)', row).html(isNaN(d) ? '' : '€' + d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\nvar d = parseFloat(data[1]); $('td:eq(1)', row).html(isNaN(d) ? '' : '€' + d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\n}"
    },
    "callback": "function(table) {\nreturn table;\n}",
    "filter": "none"
  },
  "evals": ["options.rowCallback", "callback"]
}</script></p>
<p>Under the hood, these formatting functions are just wrappers for the <code>rowCallback</code> option to generate the appropriate JavaScript code.</p>
<p>Similarly, there is a <code>formatDate()</code> function that can be used to format date/time columns. It has a <code>method</code> argument that takes values from a list of possible <a href="http://mzl.la/1xGe99W">conversion methods</a>: <code>toDateString</code>, <code>toISOString</code>, <code>toLocaleDateString</code>, <code>toLocaleString</code>, <code>toLocaleTimeString</code>, <code>toString</code>, <code>toTimeString</code>, <code>toUTCString</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">strptime</span>(<span class="st">&#39;2015-03-27 14:12:30&#39;</span>, <span class="st">&#39;%Y-%m-%d %H:%M:%S&#39;</span>, <span class="dt">tz =</span> <span class="st">&#39;CDT&#39;</span>)
(<span class="dt">x =</span> x +<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="fl">1e6</span>, <span class="dt">length.out =</span> <span class="dv">10</span>))
##  [1] &quot;2015-03-27 14:12:31 CDT&quot; &quot;2015-03-28 21:04:22 CDT&quot;
##  [3] &quot;2015-03-30 03:56:13 CDT&quot; &quot;2015-03-31 10:48:04 CDT&quot;
##  [5] &quot;2015-04-01 17:39:55 CDT&quot; &quot;2015-04-03 00:31:46 CDT&quot;
##  [7] &quot;2015-04-04 07:23:37 CDT&quot; &quot;2015-04-05 14:15:28 CDT&quot;
##  [9] &quot;2015-04-06 21:07:19 CDT&quot; &quot;2015-04-08 03:59:10 CDT&quot;
DT:::DateMethods
## [1] &quot;toDateString&quot;       &quot;toISOString&quot;        &quot;toLocaleDateString&quot;
## [4] &quot;toLocaleString&quot;     &quot;toLocaleTimeString&quot; &quot;toString&quot;          
## [7] &quot;toTimeString&quot;       &quot;toUTCString&quot;
<span class="co"># use m = DT:::DateMethods below to see the output of all methods</span>
m =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;toDateString&#39;</span>, <span class="st">&#39;toLocaleDateString&#39;</span>, <span class="st">&#39;toLocaleString&#39;</span>, <span class="st">&#39;toUTCString&#39;</span>)
d =<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">setNames</span>(<span class="kw">lapply</span>(m, function(.) x), m))
<span class="kw">str</span>(d)
## &#39;data.frame&#39;:    10 obs. of  4 variables:
##  $ toDateString      : POSIXct, format: &quot;2015-03-27 14:12:31&quot; &quot;2015-03-28 21:04:22&quot; ...
##  $ toLocaleDateString: POSIXct, format: &quot;2015-03-27 14:12:31&quot; &quot;2015-03-28 21:04:22&quot; ...
##  $ toLocaleString    : POSIXct, format: &quot;2015-03-27 14:12:31&quot; &quot;2015-03-28 21:04:22&quot; ...
##  $ toUTCString       : POSIXct, format: &quot;2015-03-27 14:12:31&quot; &quot;2015-03-28 21:04:22&quot; ...
<span class="kw">datatable</span>(d, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">5</span>, <span class="dt">dom =</span> <span class="st">&#39;tip&#39;</span>)) %&gt;%
<span class="st">  </span><span class="kw">formatDate</span>(<span class="dv">1</span>:<span class="kw">ncol</span>(d), m)</code></pre>
<p><div id="htmlwidget-7083" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-7083">{
  "x": {
    "data": [
      ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
      ["2015-03-27T14:12:31Z", "2015-03-28T21:04:22Z", "2015-03-30T03:56:13Z", "2015-03-31T10:48:04Z", "2015-04-01T17:39:55Z", "2015-04-03T00:31:46Z", "2015-04-04T07:23:37Z", "2015-04-05T14:15:28Z", "2015-04-06T21:07:19Z", "2015-04-08T03:59:10Z"],
      ["2015-03-27T14:12:31Z", "2015-03-28T21:04:22Z", "2015-03-30T03:56:13Z", "2015-03-31T10:48:04Z", "2015-04-01T17:39:55Z", "2015-04-03T00:31:46Z", "2015-04-04T07:23:37Z", "2015-04-05T14:15:28Z", "2015-04-06T21:07:19Z", "2015-04-08T03:59:10Z"],
      ["2015-03-27T14:12:31Z", "2015-03-28T21:04:22Z", "2015-03-30T03:56:13Z", "2015-03-31T10:48:04Z", "2015-04-01T17:39:55Z", "2015-04-03T00:31:46Z", "2015-04-04T07:23:37Z", "2015-04-05T14:15:28Z", "2015-04-06T21:07:19Z", "2015-04-08T03:59:10Z"],
      ["2015-03-27T14:12:31Z", "2015-03-28T21:04:22Z", "2015-03-30T03:56:13Z", "2015-03-31T10:48:04Z", "2015-04-01T17:39:55Z", "2015-04-03T00:31:46Z", "2015-04-04T07:23:37Z", "2015-04-05T14:15:28Z", "2015-04-06T21:07:19Z", "2015-04-08T03:59:10Z"]
    ],
    "container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th> </th>\n      <th>toDateString</th>\n      <th>toLocaleDateString</th>\n      <th>toLocaleString</th>\n      <th>toUTCString</th>\n    </tr>\n  </thead>\n</table>",
    "options": {
      "pageLength": 5,
      "dom": "tip",
      "order": [],
      "autoWidth": false,
      "orderClasses": false,
      "columnDefs": [
        {
          "orderable": false,
          "targets": 0
        }
      ],
      "lengthMenu": [5, 10, 25, 50, 100],
      "rowCallback": "function(row, data) {\nvar d = new Date(data[1]); $('td:eq(1)', row).html(d['toDateString']());\nvar d = new Date(data[2]); $('td:eq(2)', row).html(d['toLocaleDateString']());\nvar d = new Date(data[3]); $('td:eq(3)', row).html(d['toLocaleString']());\nvar d = new Date(data[4]); $('td:eq(4)', row).html(d['toUTCString']());\n}"
    },
    "callback": "function(table) {\nreturn table;\n}",
    "filter": "none"
  },
  "evals": ["options.rowCallback", "callback"]
}</script></p>
<p>Please note that these conversion methods may be dependent on your system locale and web browser. The same method may lead to different output in different web browsers and system languages.</p>
</div>
<div id="table-utilities" class="section level1">
<h1><span class="header-section-number">2</span> Table Utilities</h1>
<p>The functions <code>tableHeader()</code> and <code>tableFooter</code> are wrappers of <code>htmltools::tags</code> to generate a table header or footer. It may be convenient when you want to define a custom <a href="./">table container</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tableHeader</span>(iris)</code></pre>
<pre><code>&lt;thead&gt;
  &lt;tr&gt;
    &lt;th&gt;Sepal.Length&lt;/th&gt;
    &lt;th&gt;Sepal.Width&lt;/th&gt;
    &lt;th&gt;Petal.Length&lt;/th&gt;
    &lt;th&gt;Petal.Width&lt;/th&gt;
    &lt;th&gt;Species&lt;/th&gt;
  &lt;/tr&gt;
&lt;/thead&gt; </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tableHeader</span>(<span class="kw">colnames</span>(iris))  <span class="co"># equivalent to tableHeader(iris)</span></code></pre>
<pre><code>&lt;thead&gt;
  &lt;tr&gt;
    &lt;th&gt;Sepal.Length&lt;/th&gt;
    &lt;th&gt;Sepal.Width&lt;/th&gt;
    &lt;th&gt;Petal.Length&lt;/th&gt;
    &lt;th&gt;Petal.Width&lt;/th&gt;
    &lt;th&gt;Species&lt;/th&gt;
  &lt;/tr&gt;
&lt;/thead&gt; </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tableFooter</span>(iris)  <span class="co"># footer</span></code></pre>
<pre><code>&lt;tfoot&gt;
  &lt;tr&gt;
    &lt;th&gt;Sepal.Length&lt;/th&gt;
    &lt;th&gt;Sepal.Width&lt;/th&gt;
    &lt;th&gt;Petal.Length&lt;/th&gt;
    &lt;th&gt;Petal.Width&lt;/th&gt;
    &lt;th&gt;Species&lt;/th&gt;
  &lt;/tr&gt;
&lt;/tfoot&gt; </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(htmltools)
tags$<span class="kw">table</span>(<span class="kw">tableHeader</span>(iris), <span class="kw">tableFooter</span>(iris))</code></pre>
<pre><code>&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Sepal.Length&lt;/th&gt;
      &lt;th&gt;Sepal.Width&lt;/th&gt;
      &lt;th&gt;Petal.Length&lt;/th&gt;
      &lt;th&gt;Petal.Width&lt;/th&gt;
      &lt;th&gt;Species&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;th&gt;Sepal.Length&lt;/th&gt;
      &lt;th&gt;Sepal.Width&lt;/th&gt;
      &lt;th&gt;Petal.Length&lt;/th&gt;
      &lt;th&gt;Petal.Width&lt;/th&gt;
      &lt;th&gt;Species&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt; </code></pre>
</div>
<div id="functions-imported-from-htmlwidgets" class="section level1">
<h1><span class="header-section-number">3</span> Functions Imported from htmlwidgets</h1>
<p>We imported and re-exported a few functions from the <strong>htmlwidgets</strong> package. The function <code>JS()</code> can be used to wrap literal JavaScript code. You can pass either a single character string, or a character vector to <code>JS()</code>. In the latter case, the vector will be concatenated into a single string using the separator <code>\n</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">JS</span>(<span class="st">&#39;alter(&quot;OK&quot;);&#39;</span>)
<span class="kw">JS</span>(<span class="kw">c</span>(
  <span class="st">&#39;function(x) {&#39;</span>,
  <span class="st">&#39;  return x + 1;&#39;</span>,
  <span class="st">&#39;}&#39;</span>
))
<span class="co"># same as</span>
<span class="kw">JS</span>(<span class="st">&#39;function(x) {</span>
<span class="st">  return x + 1;</span>
<span class="st">}&#39;</span>)</code></pre>
<p>The function <code>saveWidget()</code> can be used to save a widget to an HTML file, e.g.</p>
<pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">datatable</span>(iris)
<span class="kw">saveWidget</span>(x, <span class="st">&#39;iris-table.html&#39;</span>)</code></pre>
</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
    // active menu
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === '') href = './';
    $('a[href="' + href + '"]').parent().addClass('active');
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
