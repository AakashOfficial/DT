<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Using DT in Shiny</title>

<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="libs/datatables/js/jquery.dataTables.min.js"></script>
<script src="libs/datatables-binding/datatables.js"></script>
<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 70px;
}
</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="./">DT</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="./">Home</a></li>
        <li><a href="options.html">Options</a></li>
        <li><a href="functions.html">Functions</a></li>
        <li><a href="server.html">Server-side Processing</a></li>
        <li><a href="extensions.html">Extensions</a></li>
        <li><a href="shiny.html">Shiny</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/rstudio/DT" title="View Source on Github"><span class="glyphicon glyphicon-download"></span></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</nav><!--/.navbar -->

<div id="header">
<h1 class="title">Using DT in Shiny</h1>
</div>


<hr />
<p>You can render a table widget in shiny, and obtain some information about its current state, such as the indices of the rows on the current page. Note these information are currently not available if you are using the <a href="server.html">server-side processing</a> mode (i.e. when <code>datatable(server = TRUE)</code>).</p>
<div id="a-minimal-example" class="section level1">
<h1><span class="header-section-number">1</span> A Minimal Example</h1>
<p>Here is a minimal example of (client-side) DataTables in Shiny using the convenience functions <code>dataTableOutput()</code> and <code>renderDataTable()</code> in <strong>DT</strong> (instead of <strong>shiny</strong>):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">shinyApp</span>(
  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(DT::<span class="kw">dataTableOutput</span>(<span class="st">&#39;tbl&#39;</span>)),
  <span class="dt">server =</span> function(input, output) {
    output$tbl =<span class="st"> </span>DT::<span class="kw">renderDataTable</span>({
      DT::<span class="kw">datatable</span>(iris)
    })
  }
)</code></pre>
<p>If you have used the <code>renderDataTable()</code> function in <strong>shiny</strong> before, please note that the function with the same name in <strong>DT</strong> should take a widget as the input instead of a data object, i.e. you should <code>renderDataTable(datatable(iris))</code> instead of <code>renderDataTable(iris)</code> in <strong>DT</strong>.</p>
</div>
<div id="interaction-with-shiny" class="section level1">
<h1><span class="header-section-number">2</span> Interaction with Shiny</h1>
<p>There are some information exposed to Shiny from the table widget as you interact with the table in Shiny.</p>
<div id="row-selection" class="section level2">
<h2><span class="header-section-number">2.1</span> Row Selection</h2>
<p>One way to enable row selection in the table is to add a column of checkboxes to the table. You can use the function <code>appendCheckboxes()</code> to do this. Remember, you need to tell <code>datatable()</code> not to escape this column, otherwise you will see raw HTML code like <code>&lt;input type=&quot;checkbox&quot; ... /&gt;</code> in the table.</p>
<pre class="sourceCode r"><code class="sourceCode r">iris2 =<span class="st"> </span><span class="kw">head</span>(iris, <span class="dv">20</span>)
<span class="kw">datatable</span>(
  <span class="kw">appendCheckboxes</span>(iris2), <span class="dt">escape =</span> -<span class="dv">7</span>,
  <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">5</span>, <span class="dt">dom =</span> <span class="st">&#39;tip&#39;</span>)
)</code></pre>
<p><div id="htmlwidget-5716" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-5716">{ "x": {
 "data": [
 [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20" ],
[               5.1,               4.9,               4.7,               4.6,                 5,               5.4,               4.6,                 5,               4.4,               4.9,               5.4,               4.8,               4.8,               4.3,               5.8,               5.7,               5.4,               5.1,               5.7,               5.1 ],
[               3.5,                 3,               3.2,               3.1,               3.6,               3.9,               3.4,               3.4,               2.9,               3.1,               3.7,               3.4,                 3,                 3,                 4,               4.4,               3.9,               3.5,               3.8,               3.8 ],
[               1.4,               1.4,               1.3,               1.5,               1.4,               1.7,               1.4,               1.5,               1.4,               1.5,               1.5,               1.6,               1.4,               1.1,               1.2,               1.5,               1.3,               1.4,               1.7,               1.5 ],
[               0.2,               0.2,               0.2,               0.2,               0.2,               0.4,               0.3,               0.2,               0.2,               0.1,               0.2,               0.2,               0.1,               0.1,               0.2,               0.4,               0.4,               0.3,               0.3,               0.3 ],
[ "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa" ],
[ "<input data-row=\"1\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"2\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"3\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"4\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"5\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"6\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"7\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"8\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"9\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"10\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"11\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"12\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"13\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"14\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"15\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"16\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"17\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"18\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"19\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"20\" type=\"checkbox\" class=\"DT checkboxRows\" />" ] 
],
"container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th> </th>\n      <th>Sepal.Length</th>\n      <th>Sepal.Width</th>\n      <th>Petal.Length</th>\n      <th>Petal.Width</th>\n      <th>Species</th>\n      <th> </th>\n    </tr>\n  </thead>\n</table>",
"options": {
 "pageLength":                 5,
"dom": "tip",
"columnDefs": [
 {
 "orderable": false,
"targets":                 0 
},
{
 "className": "dt-right",
"targets": [                 1,                 2,                 3,                 4 ] 
} 
],
"order": [],
"autoWidth": false 
},
"callback": "function(table) {\nreturn table;\n}",
"colnames": [ " ", "Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width", "Species", " " ],
"filter": "none" 
},"evals": [ "callback" ] }</script></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># just use checkboxes as the &quot;row names&quot;</span>
<span class="kw">datatable</span>(
  iris2, <span class="dt">rownames =</span> <span class="kw">checkboxRows</span>(iris2), <span class="dt">escape =</span> -<span class="dv">1</span>,
  <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">5</span>, <span class="dt">dom =</span> <span class="st">&#39;tip&#39;</span>)
)</code></pre>
<p><div id="htmlwidget-4929" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-4929">{ "x": {
 "data": [
 [ "<input data-row=\"1\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"2\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"3\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"4\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"5\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"6\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"7\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"8\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"9\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"10\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"11\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"12\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"13\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"14\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"15\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"16\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"17\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"18\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"19\" type=\"checkbox\" class=\"DT checkboxRows\" />", "<input data-row=\"20\" type=\"checkbox\" class=\"DT checkboxRows\" />" ],
[               5.1,               4.9,               4.7,               4.6,                 5,               5.4,               4.6,                 5,               4.4,               4.9,               5.4,               4.8,               4.8,               4.3,               5.8,               5.7,               5.4,               5.1,               5.7,               5.1 ],
[               3.5,                 3,               3.2,               3.1,               3.6,               3.9,               3.4,               3.4,               2.9,               3.1,               3.7,               3.4,                 3,                 3,                 4,               4.4,               3.9,               3.5,               3.8,               3.8 ],
[               1.4,               1.4,               1.3,               1.5,               1.4,               1.7,               1.4,               1.5,               1.4,               1.5,               1.5,               1.6,               1.4,               1.1,               1.2,               1.5,               1.3,               1.4,               1.7,               1.5 ],
[               0.2,               0.2,               0.2,               0.2,               0.2,               0.4,               0.3,               0.2,               0.2,               0.1,               0.2,               0.2,               0.1,               0.1,               0.2,               0.4,               0.4,               0.3,               0.3,               0.3 ],
[ "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa" ] 
],
"container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th> </th>\n      <th>Sepal.Length</th>\n      <th>Sepal.Width</th>\n      <th>Petal.Length</th>\n      <th>Petal.Width</th>\n      <th>Species</th>\n    </tr>\n  </thead>\n</table>",
"options": {
 "pageLength":                 5,
"dom": "tip",
"columnDefs": [
 {
 "orderable": false,
"targets":                 0 
},
{
 "className": "dt-right",
"targets": [                 1,                 2,                 3,                 4 ] 
} 
],
"order": [],
"autoWidth": false 
},
"callback": "function(table) {\nreturn table;\n}",
"colnames": [ " ", "Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width", "Species" ],
"filter": "none" 
},"evals": [ "callback" ] }</script></p>
<p>The examples above only show you how a table looks like when you add a column of checkboxes. See <a href="https://yihui.shinyapps.io/DT-checkbox/">this example</a> for how Shiny react to changes from the checkboxes.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># you can find the example locally in the DT package</span>
app =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&#39;examples&#39;</span>, <span class="st">&#39;DT-checkbox&#39;</span>, <span class="dt">package =</span> <span class="st">&#39;DT&#39;</span>)
shiny::<span class="kw">runApp</span>(app)</code></pre>
</div>
<div id="datatables-information" class="section level2">
<h2><span class="header-section-number">2.2</span> DataTables Information</h2>
<p>As you interact with the table (e.g. sort columns, search the table, or navigate through pages), <strong>DT</strong> will expose some information about the current state of the table to Shiny. At the moment, these information are available in the <code>input</code> object of the Shiny server function (suppose the table output id is <code>foo</code>):</p>
<ul>
<li><code>input$foo_rows_current</code>: the indices of rows on the current page</li>
<li><code>input$foo_rows_all</code>: the indices of rows on all pages (after the table is filtered by the search strings)</li>
</ul>
<p><a href="https://yihui.shinyapps.io/DT-info/">This example</a> shows how you can make use of these information to highlight points on a scatterplot and download the filtered data.</p>
<pre class="sourceCode r"><code class="sourceCode r">app =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&#39;examples&#39;</span>, <span class="st">&#39;DT-info&#39;</span>, <span class="dt">package =</span> <span class="st">&#39;DT&#39;</span>)
shiny::<span class="kw">runApp</span>(app)</code></pre>
<p><a href="https://yihui.shinyapps.io/DT-info/"><img src="http://i.imgur.com/gZzwKEQ.png" alt="DataTables information in shiny" /></a></p>
</div>
</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
    // active menu
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === '') href = './';
    $('a[href="' + href + '"]').parent().addClass('active');
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
